{"version":3,"sources":["../../src/renderer/Login.jsx"],"names":["FORM_STYLE","margin","padding","SIGNUP_LINK_STYLE","display","marginLeft","Login","props","state","email","localStorage","userEmail","password","userPassword","errors","handleOnChangeEmail","bind","handleOnChangePassword","handleOnSubmit","e","setState","target","value","isValid","preventDefault","length","push","auth","signInWithEmailAndPassword","then","catch","Component"],"mappings":"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","file":"Login.js","sourcesContent":["import React from \"react\";\nimport { Link, hashHistory } from \"react-router\";\nimport Errors from \"./Errors\";\nimport firebase from \"firebase/firebase-browser\";\n\nconst FORM_STYLE = {\n\tmargin: \"0 auto\",\n\tpadding: 30\n}\n\nconst SIGNUP_LINK_STYLE = {\n\tdisplay: \"inline-block\",\n\tmarginLeft: 10\n}\n\nexport default class Login extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\temail: localStorage.userEmail || \"\",\n\t\t\tpassword: localStorage.userPassword || \"\",\n\t\t\terrors: []\n\t\t};\n\t\tthis.handleOnChangeEmail = this.handleOnChangeEmail.bind(this);\n\t\tthis.handleOnChangePassword = this.handleOnChangePassword.bind(this);\n\t\tthis.handleOnSubmit = this.handleOnSubmit.bind(this);\n\t}\n\n\thandleOnChangeEmail(e) {\n\t\tthis.setState({ email: e.target.value });\n\t}\n\n\thandleOnChangePassword(e) {\n\t\tthis.setState({ password: e.target.value });\n\t}\n\n\t// ログイン処理\n\thandleOnSubmit(e) {\n\t\tconst { email, password } = this.state;\n\t\tconst errors = [];\n\t\tlet isValid = true;\n\t\te.preventDefault();\n\t\tif(!email.length) {\n\t\t\tisValid = false;\n\t\t\terrors.push(\"Email can`t be blank.\");\n\t\t}\n\t\tif(!password.length) {\n\t\t\tisValid = false;\n\t\t\terrors.push(\"password can`t be blank.\");\n\t\t}\n\t\tif(!isValid) {\n\t\t\t// 必須入力チェックに該当した場合はエラーを表示する\n\t\t\tthis.setState({ errors });\n\t\t\treturn;\n\t\t}\n\t\t// Firebase のログイン処理\n\t\tfirebase.auth().signInWithEmailAndPassword(email, password).then(() => {\n\t\t\t// 次回ログイン簡略化のため、localStorageに値を保存\n\t\t\tlocalStorage.userEmail = email;\n\t\t\tlocalStorage.userPassword = password;\n\t\t\t// チャットルーム一覧画面へ遷移\n\t\t\thashHistory.push(\"/rooms\");\n\t\t}).catch(() => {\n\t\t\t// Firebaseでログインエラーになった場合\n\t\t\tthis.setState({ errors: [\"Incorrect email or password.\"] });\n\t\t});\n\t}\n\n\n\trender() {\n\t\treturn (\n\t\t\t<form style={FORM_STYLE} onSubmit={this.handleOnSubmit}>\n\t\t\t\t<Errors errorMessages={this.state.errors} />\n\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t<label>Email address</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\tplaceholder=\"email\"\n\t\t\t\t\t\tonChange={this.handleOnChangeEmail}\n\t\t\t\t\t\tvalue={this.state.email}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\tplaceholder=\"password\"\n\t\t\t\t\t\tonChange={this.handleOnChangePassword}\n\t\t\t\t\t\tvalue={this.state.password}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t<button className=\"btn btn-large btn-default\">Login</button>\n\t\t\t\t\t<div style={SIGNUP_LINK_STYLE}>\n\t\t\t\t\t\t<Link to=\"signup\">create new account</Link>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t);\n\t}\n}\n"]}